File secureProperties = new File("${project.rootDir}/secure.properties")

File keystoreLocal = new File(System.properties['user.home'], 'Android/keystore.jks')
File keystoreCI = new File(System.getenv("HOME") + "/" + System.getenv("CIRCLE_PROJECT_REPONAME"), keystore.jks")

if (keystoreLocal.exists()) {
    ext.storeFile = keystoreLocal
} else if (keystoreCI.exists()) {
    ext.storeFile = keystoreCI
}

if (secureProperties.exists()) {

    Properties properties = new Properties()
    properties.load(secureProperties.newDataInputStream())
    ext.keyPassword = properties.getProperty("keyalias.password")
    ext.storePassword = properties.getProperty("keystore.password")
    ext.bintrayUser = properties.getProperty("bintray.user")
    ext.bintrayApiKey = properties.getProperty("bintray.apikey")
    ext.bintrayGpgPassword = properties.getProperty("bintray.gpg.password")
    
} else {

    ext.keyPassword = System.getenv("KEYALIAS_PASSWORD")
    ext.storePassword = System.getenv("KEYSTORE_PASSWORD")
    ext.bintrayUser = System.getenv("BINTRAY_USER")
    ext.bintrayApiKey = System.getenv("BINTRAY_APIKEY")
    ext.bintrayGpgPassword = System.getenv("BINTRAY_GPG_PASSWORD")
    
}
